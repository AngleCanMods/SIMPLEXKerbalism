//	=====================
//	*** Mass changes

@PART[mmgh-alg-1875|mmgh-agr-1875|mmgh-pbr-1875]:BEFORE[MoldaviteMachines]
	{	@mass = 2.25 // 1.61
		@refPower = 0.5 // 0.42
	}
@PART[mmgh-alg-250|mmgh-agr-250|mmgh-pbr-250]:BEFORE[MoldaviteMachines]
	{	@mass = 3.75 // 2.15
	}
@PART[mmgh-alg-375|mmgh-agr-375|mmgh-pbr-375]:BEFORE[MoldaviteMachines]
	{	// @mass = 7.2
		@refPower = 2 // 2.25
	}

//	=====================
//	***	Comfort Providers

@PART[mmgh-agr-*]:NEEDS[MoldaviteMachines,FeatureComfort]:AFTER[KerbalismSimplex]
	{	MODULE
			{	name = Comfort
				bonus = plants
				desc =  #KerbalismSimplex_bonus_plants_desc
			}
		@tags ^= :$: comfort:
	}

// ============================================================================
// Greenhouses
// ============================================================================

@PART[mmgh-agr-1875]:NEEDS[MoldaviteMachines,ProfileSimplex]:AFTER[KerbalismSimplex] // Replacement for kerbalism greenhouse
	{	@description = #$description$ $@KERBALISM_GREENHOUSE_STRINGS/support_half_kerbal$
		MODULE
			{	name = Greenhouse
				crop_resource = Consumables			// name of resource produced by harvests
				crop_size = 36               		// amount of resource produced by harvests enough for .5 kerbal in line with recent kerbalism studies.
				crop_rate = 0.0000006430			// growth per-second for 72 days till harvest which is just over 1/6 of a year (a kerbal season maybe)
				ec_rate = 2.5						// EC/s consumed by the lamp at max intensity
				light_tolerance = 400.0             // minimum lighting flux required for growth, in W/m^2
				pressure_tolerance = 0.1            // minimum pressure required for growth, in sea level atmospheres
				radiation_tolerance = 0.000008333   // maximum radiation allowed for growth in rad/s, considered after shielding is applied
				lamps = Cylinder001                 // object with emissive texture used to represent lamp intensity graphically
				shutters = door                     // animation to manipulate shutters
				plants =                            // animation to represent plant growth graphically
				INPUT_RESOURCE
					{	name = OrganicSlurry
						rate = 0.00002314815		// 36 units in harvest in 72 days to support .5 kerbal in line with kerbalism default
					}
				INPUT_RESOURCE
					{	name = BadAir
						rate = 0.00002314815		// currently replacing a half kerbal worth of air
					}
				OUTPUT_RESOURCE
					{	name = Air
						rate = 0.00002314815		// currently replacing a half kerbal worth of air
					}
			}
		MODULE
			{	name = ProcessController
				resource = _PressureControl
				title = #KerbalismSimplex_pressure_control
				capacity = 0.2143
				running = true
			}
		RESOURCE
			{	name = OrganicSlurry
				amount = 0
				maxAmount = 36
			}
		RESOURCE
			{	name = BadAir
				amount = 0
				maxAmount = 36
			}
		RESOURCE
			{	name = Air
				amount = 0
				maxAmount = 36
			}
	}

@PART[mmgh-agr-250]:NEEDS[MoldaviteMachines,ProfileSimplex]:AFTER[KerbalismSimplex] // Replacement for kerbalism greenhouse
	{	@description = #$description$ $@KERBALISM_GREENHOUSE_STRINGS/support_one_kerbal$
		MODULE
			{	name = Greenhouse
				crop_resource = Consumables			// name of resource produced by harvests
													// As effective as kerbalism-greenhouse part, so 72 food every 72 days or so. 
				crop_size = 72						// changed to 72 day harvest
				crop_rate = 0.0000006430			
				ec_rate = 2.5						// 
				light_tolerance = 400.0				// minimum lighting flux required for growth, in W/m^2
				pressure_tolerance = 0.1			// minimum pressure required for growth, in sea level atmospheres
				radiation_tolerance = 0.000008333	// maximum radiation allowed for growth in rad/s, considered after shielding is applied
				shutters = 25DoorsOpen				// animation to manipulate shutters
				animBackwards = True

				INPUT_RESOURCE
					{	name = OrganicSlurry
						rate = 0.0000462963		// 2x"kerbalism-greenhouse"
					}
				INPUT_RESOURCE
					{	name = BadAir
						rate = 0.0000462963		// currently replacing a whole kerbal worth of air in line with kerbalism simplex
					}
				OUTPUT_RESOURCE
					{	name = Air
						rate = 0.0000462963		// currently replacing a whole kerbal worth of air in line with kerbalism simplex
					}
			}
		MODULE
			{	name = ProcessController
				resource = _PressureControl
				title = #KerbalismSimplex_pressure_control
				capacity = 0.2143
				running = true
			}
		RESOURCE
			{	name = OrganicSlurry
				amount = 0
				maxAmount = 72
			}
		RESOURCE
			{	name = BadAir
				amount = 0
				maxAmount = 72
			}
		RESOURCE
			{	name = Air
				amount = 0
				maxAmount = 72
			}
		!MODULE[ModuleAnimateGeneric] {}			// Greenhouse handles animation
	}

@PART[mmgh-agr-375]:NEEDS[MoldaviteMachines,ProfileSimplex]:AFTER[KerbalismSimplex]
	{	@description = #$description$ $@KERBALISM_GREENHOUSE_STRINGS/support_two_kerbal$
		MODULE											// SUPPORTS 2 kerbal
			{	name = Greenhouse
				crop_resource = Consumables				// name of resource produced by harvests
														// Twice as effective as kerbalism-greenhouse part. 
														// Both growing "rings" of this greenhouse are unfortunately in the same section. No independent growing possible. (Different watering and lighting needs for different grow stages). 
				crop_size = 144							// 4x kerbalism-greenhouse
				crop_rate = 0.0000006430				// regular growth speed
				ec_rate = 10							// 4x"kerbalism-greenhouse"
				light_tolerance = 400.0					// minimum lighting flux required for growth, in W/m^2
				pressure_tolerance = 0.1				// minimum pressure required for growth, in sea level atmospheres
				radiation_tolerance = 0.000008333		// maximum radiation allowed for growth in rad/s, considered after shielding is applied

				INPUT_RESOURCE
					{	name = OrganicSlurry
						rate = 0.0000925926				// 4x"kerbalism-greenhouse"
					}
				INPUT_RESOURCE
					{	name = BadAir
						rate = 0.0000925926				// currently replacing 2 kerbals worth of air
					}
				OUTPUT_RESOURCE
					{	name = Air
						rate = 0.0000925926		
					}
			}
		MODULE
			{	name = ProcessController
				resource = _PressureControl
				title = #KerbalismSimplex_pressure_control
				capacity = 0.2143
				running = true
			}
		RESOURCE
			{	name = OrganicSlurry
				amount = 0
				maxAmount = 144
			}
		RESOURCE
			{	name = BadAir
				amount = 0
				maxAmount = 144
			}
		RESOURCE
			{	name = Air
				amount = 0
				maxAmount = 144
			}
	}

//	==============================
//	*** Algae Farms / Aquaculture

@PART[mmgh-alg-1875]:NEEDS[MoldaviteMachines,ProfileSimplex]:AFTER[KerbalismSimplex]		//,!AngleCanMods/SIMPLEXResources
	{	@description = #$description$ $@KERBALISM_GREENHOUSE_STRINGS/support_half_kerbal$
		MODULE											
			{	name = Greenhouse						// SUPPORTS .5 kerbals constant food for a year
				crop_resource = Ore						// this is a filtration system
				crop_size = 92							// Idea being this is equivalent to kerbalism greenhouse, no comfort bonus though
				crop_rate = 0.00000010868				// Harvest annually
				ec_rate = 2.5							// 1x"kerbalism-greenhouse"
				light_tolerance = 400 					// 400.0					// minimum lighting flux required for growth, in W/m^2
				pressure_tolerance = 0.1				// minimum pressure required for growth, in sea level atmospheres
				radiation_tolerance = 0.000008333		// maximum radiation allowed for growth in rad/s, considered after shielding is applied

				INPUT_RESOURCE
					{	name = Ore
						rate = 0.00001
					}
				INPUT_RESOURCE
					{	name = OrganicSlurry
						rate = 0.00002314815
					}
				INPUT_RESOURCE
					{	name = BadAir
						rate = 0.00002314815
					}
				OUTPUT_RESOURCE
					{	name = Air
						rate = 0.00002314815
					}
				OUTPUT_RESOURCE
					{	name = Consumables
						rate = 0.00002314815
					}
			}
		RESOURCE
			{	name = Ore				// could be water with CTT, otherwise Saturate
				amount = 93
				maxAmount = 93
			}

		RESOURCE
			{	name = BadAir
				amount = 216
				maxAmount = 216
			}
		RESOURCE
			{	name = OrganicSlurry
				amount = 216
				maxAmount = 216
			}
		RESOURCE
			{	name = Air
				amount = 0
				maxAmount = 216
			}
		RESOURCE
			{	name = Consumables
				amount = 0
				maxAmount = 216
			}
	}

@PART[mmgh-alg-250]:NEEDS[MoldaviteMachines,ProfileSimplex]:AFTER[KerbalismSimplex]		//,!AngleCanMods/SIMPLEXResources
	{	@description = #$description$ $@KERBALISM_GREENHOUSE_STRINGS/support_one_kerbal$
		MODULE											
			{	name = Greenhouse						// SUPPORTS 1 kerbals constant food for a year
				crop_resource = Ore						// this is a filtration system
				crop_size = 92							// Idea being this is equivalent to kerbalism greenhouse, no comfort bonus though
				crop_rate = 0.00000010868				// Harvest annually
				ec_rate = 5								// 2x"kerbalism-greenhouse"
				light_tolerance = 400 					// 400.0					// minimum lighting flux required for growth, in W/m^2
				pressure_tolerance = 0.1				// minimum pressure required for growth, in sea level atmospheres
				radiation_tolerance = 0.000008333		// maximum radiation allowed for growth in rad/s, considered after shielding is applied

				INPUT_RESOURCE
					{	name = Ore
						rate = 0.00001
					}
				INPUT_RESOURCE
					{	name = OrganicSlurry
						rate = 0.0000462963
					}
				INPUT_RESOURCE
					{	name = BadAir
						rate = 0.0000462963
					}
				OUTPUT_RESOURCE
					{	name = Air
						rate = 0.0000462963
					}
				OUTPUT_RESOURCE
					{	name = Consumables
						rate = 0.0000462963
					}
			}
		RESOURCE
			{	name = Ore				// could be water with CTT, otherwise Saturate
				amount = 93
				maxAmount = 93
			}

		RESOURCE
			{	name = BadAir
				amount = 216
				maxAmount = 216
			}
		RESOURCE
			{	name = OrganicSlurry
				amount = 216
				maxAmount = 216
			}
		RESOURCE
			{	name = Air
				amount = 0
				maxAmount = 216
			}
		RESOURCE
			{	name = Consumables
				amount = 0
				maxAmount = 216
			}
	}

@PART[mmgh-alg-375]:NEEDS[MoldaviteMachines,ProfileSimplex]:AFTER[KerbalismSimplex]		//,!AngleCanMods/SIMPLEXResources
	{	@description = #$description$ $@KERBALISM_GREENHOUSE_STRINGS/support_two_kerbal$
		MODULE											
			{	name = Greenhouse						// SUPPORTS 2 kerbals constant food for a year
				crop_resource = Ore						// this is a filtration system
				crop_size = 92							// Idea being this is equivalent to kerbalism greenhouse, no comfort bonus though
				crop_rate = 0.00000010868				// Harvest annually
				ec_rate = 10							// 4x"kerbalism-greenhouse"
				light_tolerance = 400 					// 400.0					// minimum lighting flux required for growth, in W/m^2
				pressure_tolerance = 0.1				// minimum pressure required for growth, in sea level atmospheres
				radiation_tolerance = 0.000008333		// maximum radiation allowed for growth in rad/s, considered after shielding is applied

				INPUT_RESOURCE
					{	name = Ore
						rate = 0.00001
					}
				INPUT_RESOURCE
					{	name = OrganicSlurry
						rate = 0.0000925926
					}
				INPUT_RESOURCE
					{	name = BadAir
						rate = 0.0000925926
					}
				OUTPUT_RESOURCE
					{	name = Air
						rate = 0.0000925926
					}
				OUTPUT_RESOURCE
					{	name = Consumables
						rate = 0.0000925926
					}
			}
		RESOURCE
			{	name = Ore				// could be water with CTT, otherwise Saturate
				amount = 93
				maxAmount = 93
			}

		RESOURCE
			{	name = BadAir
				amount = 216
				maxAmount = 216
			}
		RESOURCE
			{	name = OrganicSlurry
				amount = 216
				maxAmount = 216
			}
		RESOURCE
			{	name = Air
				amount = 0
				maxAmount = 216
			}
		RESOURCE
			{	name = Consumables
				amount = 0
				maxAmount = 216
			}
	}

@PART[mmgh-alg-1875,mmgh-alg-250,mmgh-alg-375]:NEEDS[MoldaviteMachines,ProfileSimplex,AngleCanMods/SIMPLEXResources]:AFTER[KerbalismSimplex]
	{	@MODULE[Greenhouse]
			{	@crop_resource = Saturate
				@INPUT_RESOURCE[Ore]	{	@name = Saturate	}
			}
		@RESOURCE[Ore]					{	@name = Saturate	}
	}

//	==============================
//	*** Bio-Reactors

@PART[mmgh-pbr-1875,mmgh-pbr-250,mmgh-pbr-375]:FOR[Kerbalism]

	@PART[mmgh-pbr-1875,mmgh-pbr-250,mmgh-pbr-375]:FOR[Kerbalism]
		{	MODULE
				{	name = ProcessController
					resource = _LFOSPyro
					title = #KerbalismSimplex_os_brewing
					capacity = 1
				}
			MODULE
				{	name = ProcessController
					resource = _LFConPyro
					title = #KerbalismSimplex_os_liquid_brewing
					capacity = 1
				}
			MODULE
				{	name = Configure
					title = ISRU
					slots = 1
					SETUP
						{	name = OrganicSlurry to LF and RareOre
							desc = #KerbalismSimplex_os_brewing_desc
							MODULE
								{	type = ProcessController
									id_field = resource
									id_value = _OSHORO
								}
						}
					SETUP
						{	name = Consumables to LF and RareOre
							desc = #KerbalismSimplex_os_liquid_brewing_desc
							MODULE
								{	type = ProcessController
									id_field = resource
									id_value = _OSSeRO
								}
						}
				}
		}
