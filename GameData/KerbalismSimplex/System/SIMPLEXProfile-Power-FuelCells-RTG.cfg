// ============================================================================
// ISRU plants
// ============================================================================

// ============================================================================
// RTG
// ============================================================================

	@PART[rtg]:NEEDS[Profilesimplex]:FOR[Kerbalism]
		{	!MODULE[ModuleGenerator] {}
			!MODULE[ModuleCoreHeat] {}
			MODULE
				{	name = ProcessController
					resource = _RTG
					title = RTG
					capacity = 0.75
					running = true
					toggle = false
				}
		}

// ============================================================================
// Fuel cells
// ============================================================================
//	ReStock has MonoPropellant APU, which is moved to Basic Science.
//	Without ReStockPlus the Fuel Cell is moved to basic Science and gains LFO option at largeElectrics which is where the part is normally located


@PART[FuelCell]:NEEDS[Profilesimplex,!ReStockPlus]:FOR[Kerbalism]		 
	{	@TechRequired = basicScience
		!MODULE[ModuleResourceConverter] {}
		!RESOURCE[ElectricCharge] {}
		MODULE
			{	name = ProcessController
				resource = _MonopropFuelCell
				title = MonoProp+Air Fuel Cell
				capacity = 5
			}
		MODULE
			{	name = ProcessController
				resource = _LFOFuelCell
				title = LFO Fuel Cell
				capacity = 1
			}
		MODULE
			{	name = Configure
				title = Fuel Cell
				slots = 1
				SETUP
					{	name = MonoPropellant and Air Fuel Cell
						desc = Burns <b>MonoPropellant</b> and <b>Air</b>.
						MODULE
							{	type = ProcessController
								id_field = resource
								id_value = _MonopropFuelCell
							}
					}
				SETUP
					{	name = LiquidFuel and Oxidizer Fuel Cell
						desc = Burns <b>LiquidFuel</b> and <b>Oxidizer</b>.
						tech = largeElectrics
						MODULE
							{	type = ProcessController
								id_field = resource
								id_value = _LFOFuelCell
							}
					}
			}
		MODULE:NEEDS[FeatureReliability]
			{	name = Reliability
				type = ProcessController
				title = Fuel Cell
				redundancy = Power Generation
				repair = Engineer
				mtbf = 72576000
				extra_cost = 1.0
				extra_mass = 0.5
			}
	}

	
@PART[restock-apu-radial-1]:NEEDS[Profilesimplex,ReStockPlus]:FOR[Kerbalism]
	{	!MODULE[ModuleResourceConverter] {}
		!RESOURCE[ElectricCharge] {}
		MODULE
			{	name = ProcessController
				resource = _MonopropFuelCell
				title = MonoProp+Air Fuel Cell
				capacity = 5
			}
		MODULE
			{	name = Configure
				title = Fuel Cell
				slots = 1
				SETUP
					{	name = MonoPropellant and Air Fuel Cell
						desc = Burns <b>MonoPropellant</b> and <b>Air</b>.
						MODULE
							{	type = ProcessController
								id_field = resource
								id_value = _MonopropFuelCell
							}
					}
			}
		MODULE:NEEDS[FeatureReliability]
			{	name = Reliability
				type = ProcessController
				title = Fuel Cell
				redundancy = Power Generation
				repair = Engineer
				mtbf = 72576000
				extra_cost = 1.0
				extra_mass = 0.5
			}
	}

@PART[FuelCell]:NEEDS[Profilesimplex,ReStockPlus]:FOR[Kerbalism]
	{	!MODULE[ModuleResourceConverter] {}
		!RESOURCE[ElectricCharge] {}
		MODULE
			{	name = ProcessController
				resource = _MonopropFuelCell
				title = MonoProp+Air Fuel Cell
				capacity = 5
			}
		MODULE
			{	name = ProcessController
				resource = _LFOFuelCell
				title = LFO Fuel Cell
				capacity = 1
			}
		MODULE
			{	name = Configure
				title = Fuel Cell
				slots = 1
				SETUP
					{	name = MonoPropellant and Air Fuel Cell
						desc = Burns <b>MonoPropellant</b> and <b>Air</b>.
						MODULE
							{	type = ProcessController
								id_field = resource
								id_value = _MonopropFuelCell
							}
					}
				SETUP
					{	name = LiquidFuel and Oxidizer Fuel Cell
						desc = Burns <b>LiquidFuel</b> and <b>Oxidizer</b>.
						MODULE
							{	type = ProcessController
								id_field = resource
								id_value = _LFOFuelCell
							}
					}
			}
		MODULE:NEEDS[FeatureReliability]
			{	name = Reliability
				type = ProcessController
				title = Fuel Cell
				redundancy = Power Generation
				repair = Engineer
				mtbf = 72576000
				extra_cost = 1.0
				extra_mass = 0.5
			}
	}


@PART[FuelCellArray]:NEEDS[Profilesimplex]:FOR[Kerbalism]
	{	!MODULE[ModuleResourceConverter] {}
		!RESOURCE[ElectricCharge] {}
		MODULE
			{	name = ProcessController
				resource = _MonopropFuelCell
				title = MonoProp+Air Fuel Cell
				capacity = 30
			}
		MODULE
			{	name = ProcessController
				resource = _LFOFuelCell
				title = LFO Fuel Cell
				capacity = 12
			}
		MODULE
			{	name = Configure
				title = Fuel Cell Array
				slots = 1
				SETUP
					{	name = MonoPropellant and Air Fuel Cell
						desc = Burns <b>MonoPropellant</b> and <b>Air</b>.
						MODULE
							{	type = ProcessController
								id_field = resource
								id_value = _MonopropFuelCell
							}
					}
				SETUP
					{	name = LiquidFuel and Oxidizer Fuel Cell
						desc = Burns <b>LiquidFuel</b> and <b>Oxidizer</b>	.
						MODULE
							{	type = ProcessController
								id_field = resource
								id_value = _LFOFuelCell
							}
					}
			}
		MODULE:NEEDS[FeatureReliability]
			{	name = Reliability
				type = ProcessController
				title = Fuel Cell
				redundancy = Power Generation
				repair = Engineer
				mtbf = 72576000
				extra_cost = 1.0
				extra_mass = 0.5
			}
	}
	
	
//	*** SIMPLEXResources ratio rebalence


@PART[FuelCell]:NEEDS[Profilesimplex,AngleCanMods/SIMPLEXResources]:FOR[Kerbalism]		 
	{	@TechRequired = basicScience
		MODULE[ProcessController],* {}
		!MODULE[Configure],* {}
		MODULE
			{	name = ProcessController
				resource = _MonopropFuelCell
				title = MonoProp+Air Fuel Cell
				capacity = 5
			}
		MODULE
			{	name = ProcessController
				resource = _SRLFOFuelCell
				title = LFO Fuel Cell
				capacity = 1
			}
		MODULE
			{	name = Configure
				title = Fuel Cell
				slots = 1
				SETUP
					{	name = MonoPropellant and Air Fuel Cell
						desc = Burns <b>MonoPropellant</b> and <b>Air</b>.
						MODULE
							{	type = ProcessController
								id_field = resource
								id_value = _MonopropFuelCell
							}
					}
				SETUP
					{	name = LiquidFuel and Oxidizer Fuel Cell
						desc = Burns <b>LiquidFuel</b> and <b>Oxidizer</b>.
						tech = largeElectrics
						MODULE
							{	type = ProcessController
								id_field = resource
								id_value = _SRLFOFuelCell
							}
					}
			}
		MODULE:NEEDS[FeatureReliability]
			{	name = Reliability
				type = ProcessController
				title = Fuel Cell
				redundancy = Power Generation
				repair = Engineer
				mtbf = 72576000
				extra_cost = 1.0
				extra_mass = 0.5
			}
	}

@PART[FuelCell]:NEEDS[Profilesimplex,ReStockPlus,AngleCanMods/SIMPLEXResources]:FOR[Kerbalism]
	{	!MODULE[ProcessController],* {}
		!MODULE[Configure],* {}
		MODULE
			{	name = ProcessController
				resource = _MonopropFuelCell
				title = MonoProp+Air Fuel Cell
				capacity = 5
			}
		MODULE
			{	name = ProcessController
				resource = _SRLFOFuelCell
				title = LFO Fuel Cell
				capacity = 1
			}
		MODULE
			{	name = Configure
				title = Fuel Cell
				slots = 1
				SETUP
					{	name = MonoPropellant and Air Fuel Cell
						desc = Burns <b>MonoPropellant</b> and <b>Air</b>.
						MODULE
							{	type = ProcessController
								id_field = resource
								id_value = _MonopropFuelCell
							}
					}
				SETUP
					{	name = LiquidFuel and Oxidizer Fuel Cell
						desc = Burns <b>LiquidFuel</b> and <b>Oxidizer</b>.
						MODULE
							{	type = ProcessController
								id_field = resource
								id_value = _SRLFOFuelCell
							}
					}
			}
	}

 
@PART[FuelCellArray]:NEEDS[Profilesimplex,ReStockPlus,AngleCanMods/SIMPLEXResources]:FOR[Kerbalism]
	{	!MODULE[ProcessController],* {}
		!MODULE[Configure],* {}
		MODULE
			{	name = ProcessController
				resource = _MonopropFuelCell
				title = MonoProp+Air Fuel Cell
				capacity = 30
			}
		MODULE
			{	name = ProcessController
				resource = _SRLFOFuelCell
				title = LFO Fuel Cell
				capacity = 12
			}
		MODULE
			{	name = Configure
				title = Fuel Cell Array
				slots = 1
				SETUP
					{	name = MonoPropellant and Air Fuel Cell
						desc = Burns <b>MonoPropellant</b> and <b>Air</b>.
						MODULE
							{	type = ProcessController
								id_field = resource
								id_value = _MonopropFuelCell
							}
					}
				SETUP
					{	name = LiquidFuel and Oxidizer Fuel Cell
						desc = Burns <b>LiquidFuel</b> and <b>Oxidizer</b>	.
						MODULE
							{	type = ProcessController
								id_field = resource
								id_value = _SRLFOFuelCell
							}
					}
			}
	}


@PART[FuelCell]:AFTER[CryoTanks]
	{	!MODULE[ModuleResourceConverter],*	{}	}
	

@PART[FuelCellArray]:AFTER[CryoTanks]
	{	!MODULE[ModuleResourceConverter],*	{}	}
	